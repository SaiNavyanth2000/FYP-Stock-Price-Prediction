{"ast":null,"code":"import { h, ref, computed, watch, Transition, nextTick, onActivated, onDeactivated, onBeforeUnmount, onMounted, getCurrentInstance } from 'vue';\nimport { isRuntimeSsrPreHydration } from '../../plugins/Platform.js';\nimport QIcon from '../../components/icon/QIcon.js';\nimport QSpinner from '../../components/spinner/QSpinner.js';\nimport useDark, { useDarkProps } from '../../composables/private/use-dark.js';\nimport useValidate, { useValidateProps } from './use-validate.js';\nimport useSplitAttrs from './use-split-attrs.js';\nimport { hSlot } from '../../utils/private/render.js';\nimport uid from '../../utils/uid.js';\nimport { prevent, stopAndPrevent } from '../../utils/event.js';\nimport { addFocusFn, removeFocusFn } from '../../utils/private/focus-manager.js';\n\nfunction getTargetUid(val) {\n  return val === void 0 ? `f_${uid()}` : val;\n}\n\nexport function fieldValueIsFilled(val) {\n  return val !== void 0 && val !== null && ('' + val).length > 0;\n}\nexport const useFieldProps = { ...useDarkProps,\n  ...useValidateProps,\n  label: String,\n  stackLabel: Boolean,\n  hint: String,\n  hideHint: Boolean,\n  prefix: String,\n  suffix: String,\n  labelColor: String,\n  color: String,\n  bgColor: String,\n  filled: Boolean,\n  outlined: Boolean,\n  borderless: Boolean,\n  standout: [Boolean, String],\n  square: Boolean,\n  loading: Boolean,\n  labelSlot: Boolean,\n  bottomSlots: Boolean,\n  hideBottomSpace: Boolean,\n  rounded: Boolean,\n  dense: Boolean,\n  itemAligned: Boolean,\n  counter: Boolean,\n  clearable: Boolean,\n  clearIcon: String,\n  disable: Boolean,\n  readonly: Boolean,\n  autofocus: Boolean,\n  for: String,\n  maxlength: [Number, String]\n};\nexport const useFieldEmits = ['update:modelValue', 'clear', 'focus', 'blur', 'popup-show', 'popup-hide'];\nexport function useFieldState() {\n  const {\n    props,\n    attrs,\n    proxy,\n    vnode\n  } = getCurrentInstance();\n  const isDark = useDark(props, proxy.$q);\n  return {\n    isDark,\n    editable: computed(() => props.disable !== true && props.readonly !== true),\n    innerLoading: ref(false),\n    focused: ref(false),\n    hasPopupOpen: false,\n    splitAttrs: useSplitAttrs(attrs, vnode),\n    targetUid: ref(getTargetUid(props.for)),\n    rootRef: ref(null),\n    targetRef: ref(null),\n    controlRef: ref(null)\n    /**\n     * user supplied additionals:\n      * innerValue - computed\n     * floatingLabel - computed\n     * inputRef - computed\n      * fieldClass - computed\n     * hasShadow - computed\n      * controlEvents - Object with fn(e)\n      * getControl - fn\n     * getInnerAppend - fn\n     * getControlChild - fn\n     * getShadowControl - fn\n     * showPopup - fn\n     */\n\n  };\n}\nexport default function (state) {\n  const {\n    props,\n    emit,\n    slots,\n    attrs,\n    proxy\n  } = getCurrentInstance();\n  const {\n    $q\n  } = proxy;\n  let focusoutTimer;\n\n  if (state.hasValue === void 0) {\n    state.hasValue = computed(() => fieldValueIsFilled(props.modelValue));\n  }\n\n  if (state.emitValue === void 0) {\n    state.emitValue = value => {\n      emit('update:modelValue', value);\n    };\n  }\n\n  if (state.controlEvents === void 0) {\n    state.controlEvents = {\n      onFocusin: onControlFocusin,\n      onFocusout: onControlFocusout\n    };\n  }\n\n  Object.assign(state, {\n    clearValue,\n    onControlFocusin,\n    onControlFocusout,\n    focus\n  });\n\n  if (state.computedCounter === void 0) {\n    state.computedCounter = computed(() => {\n      if (props.counter !== false) {\n        const len = typeof props.modelValue === 'string' || typeof props.modelValue === 'number' ? ('' + props.modelValue).length : Array.isArray(props.modelValue) === true ? props.modelValue.length : 0;\n        const max = props.maxlength !== void 0 ? props.maxlength : props.maxValues;\n        return len + (max !== void 0 ? ' / ' + max : '');\n      }\n    });\n  }\n\n  const {\n    isDirtyModel,\n    hasRules,\n    hasError,\n    errorMessage,\n    resetValidation\n  } = useValidate(state.focused, state.innerLoading);\n  const floatingLabel = state.floatingLabel !== void 0 ? computed(() => props.stackLabel === true || state.focused.value === true || state.floatingLabel.value === true) : computed(() => props.stackLabel === true || state.focused.value === true || state.hasValue.value === true);\n  const shouldRenderBottom = computed(() => props.bottomSlots === true || props.hint !== void 0 || hasRules.value === true || props.counter === true || props.error !== null);\n  const styleType = computed(() => {\n    if (props.filled === true) {\n      return 'filled';\n    }\n\n    if (props.outlined === true) {\n      return 'outlined';\n    }\n\n    if (props.borderless === true) {\n      return 'borderless';\n    }\n\n    if (props.standout) {\n      return 'standout';\n    }\n\n    return 'standard';\n  });\n  const classes = computed(() => `q-field row no-wrap items-start q-field--${styleType.value}` + (state.fieldClass !== void 0 ? ` ${state.fieldClass.value}` : '') + (props.rounded === true ? ' q-field--rounded' : '') + (props.square === true ? ' q-field--square' : '') + (floatingLabel.value === true ? ' q-field--float' : '') + (hasLabel.value === true ? ' q-field--labeled' : '') + (props.dense === true ? ' q-field--dense' : '') + (props.itemAligned === true ? ' q-field--item-aligned q-item-type' : '') + (state.isDark.value === true ? ' q-field--dark' : '') + (state.getControl === void 0 ? ' q-field--auto-height' : '') + (state.focused.value === true ? ' q-field--focused' : '') + (hasError.value === true ? ' q-field--error' : '') + (hasError.value === true || state.focused.value === true ? ' q-field--highlighted' : '') + (props.hideBottomSpace !== true && shouldRenderBottom.value === true ? ' q-field--with-bottom' : '') + (props.disable === true ? ' q-field--disabled' : props.readonly === true ? ' q-field--readonly' : ''));\n  const contentClass = computed(() => 'q-field__control relative-position row no-wrap' + (props.bgColor !== void 0 ? ` bg-${props.bgColor}` : '') + (hasError.value === true ? ' text-negative' : typeof props.standout === 'string' && props.standout.length > 0 && state.focused.value === true ? ` ${props.standout}` : props.color !== void 0 ? ` text-${props.color}` : ''));\n  const hasLabel = computed(() => props.labelSlot === true || props.label !== void 0);\n  const labelClass = computed(() => 'q-field__label no-pointer-events absolute ellipsis' + (props.labelColor !== void 0 && hasError.value !== true ? ` text-${props.labelColor}` : ''));\n  const controlSlotScope = computed(() => ({\n    id: state.targetUid.value,\n    editable: state.editable.value,\n    focused: state.focused.value,\n    floatingLabel: floatingLabel.value,\n    modelValue: props.modelValue,\n    emitValue: state.emitValue\n  }));\n  const attributes = computed(() => {\n    const acc = {\n      for: state.targetUid.value\n    };\n\n    if (props.disable === true) {\n      acc['aria-disabled'] = 'true';\n    } else if (props.readonly === true) {\n      acc['aria-readonly'] = 'true';\n    }\n\n    return acc;\n  });\n  watch(() => props.for, val => {\n    // don't transform targetUid into a computed\n    // prop as it will break SSR\n    state.targetUid.value = getTargetUid(val);\n  });\n\n  function focusHandler() {\n    const el = document.activeElement;\n    let target = state.targetRef !== void 0 && state.targetRef.value;\n\n    if (target && (el === null || el.id !== state.targetUid.value)) {\n      target.hasAttribute('tabindex') === true || (target = target.querySelector('[tabindex]'));\n\n      if (target && target !== el) {\n        target.focus({\n          preventScroll: true\n        });\n      }\n    }\n  }\n\n  function focus() {\n    addFocusFn(focusHandler);\n  }\n\n  function blur() {\n    removeFocusFn(focusHandler);\n    const el = document.activeElement;\n\n    if (el !== null && state.rootRef.value.contains(el)) {\n      el.blur();\n    }\n  }\n\n  function onControlFocusin(e) {\n    clearTimeout(focusoutTimer);\n\n    if (state.editable.value === true && state.focused.value === false) {\n      state.focused.value = true;\n      emit('focus', e);\n    }\n  }\n\n  function onControlFocusout(e, then) {\n    clearTimeout(focusoutTimer);\n    focusoutTimer = setTimeout(() => {\n      if (document.hasFocus() === true && (state.hasPopupOpen === true || state.controlRef === void 0 || state.controlRef.value === null || state.controlRef.value.contains(document.activeElement) !== false)) {\n        return;\n      }\n\n      if (state.focused.value === true) {\n        state.focused.value = false;\n        emit('blur', e);\n      }\n\n      then !== void 0 && then();\n    });\n  }\n\n  function clearValue(e) {\n    // prevent activating the field but keep focus on desktop\n    stopAndPrevent(e);\n\n    if ($q.platform.is.mobile !== true) {\n      const el = state.targetRef !== void 0 && state.targetRef.value || state.rootRef.value;\n      el.focus();\n    } else if (state.rootRef.value.contains(document.activeElement) === true) {\n      document.activeElement.blur();\n    }\n\n    if (props.type === 'file') {\n      // TODO vue3\n      // do not let focus be triggered\n      // as it will make the native file dialog\n      // appear for another selection\n      state.inputRef.value.value = null;\n    }\n\n    emit('update:modelValue', null);\n    emit('clear', props.modelValue);\n    nextTick(() => {\n      resetValidation();\n\n      if ($q.platform.is.mobile !== true) {\n        isDirtyModel.value = false;\n      }\n    });\n  }\n\n  function getContent() {\n    const node = [];\n    slots.prepend !== void 0 && node.push(h('div', {\n      class: 'q-field__prepend q-field__marginal row no-wrap items-center',\n      key: 'prepend',\n      onClick: prevent\n    }, slots.prepend()));\n    node.push(h('div', {\n      class: 'q-field__control-container col relative-position row no-wrap q-anchor--skip'\n    }, getControlContainer()));\n    hasError.value === true && props.noErrorIcon === false && node.push(getInnerAppendNode('error', [h(QIcon, {\n      name: $q.iconSet.field.error,\n      color: 'negative'\n    })]));\n\n    if (props.loading === true || state.innerLoading.value === true) {\n      node.push(getInnerAppendNode('inner-loading-append', slots.loading !== void 0 ? slots.loading() : [h(QSpinner, {\n        color: props.color\n      })]));\n    } else if (props.clearable === true && state.hasValue.value === true && state.editable.value === true) {\n      node.push(getInnerAppendNode('inner-clearable-append', [h(QIcon, {\n        class: 'q-field__focusable-action',\n        tag: 'button',\n        name: props.clearIcon || $q.iconSet.field.clear,\n        tabindex: 0,\n        type: 'button',\n        'aria-hidden': null,\n        role: null,\n        onClick: clearValue\n      })]));\n    }\n\n    slots.append !== void 0 && node.push(h('div', {\n      class: 'q-field__append q-field__marginal row no-wrap items-center',\n      key: 'append',\n      onClick: prevent\n    }, slots.append()));\n    state.getInnerAppend !== void 0 && node.push(getInnerAppendNode('inner-append', state.getInnerAppend()));\n    state.getControlChild !== void 0 && node.push(state.getControlChild());\n    return node;\n  }\n\n  function getControlContainer() {\n    const node = [];\n    props.prefix !== void 0 && props.prefix !== null && node.push(h('div', {\n      class: 'q-field__prefix no-pointer-events row items-center'\n    }, props.prefix));\n\n    if (state.getShadowControl !== void 0 && state.hasShadow.value === true) {\n      node.push(state.getShadowControl());\n    }\n\n    if (state.getControl !== void 0) {\n      node.push(state.getControl());\n    } // internal usage only:\n    else if (slots.rawControl !== void 0) {\n      node.push(slots.rawControl());\n    } else if (slots.control !== void 0) {\n      node.push(h('div', {\n        ref: state.targetRef,\n        class: 'q-field__native row',\n        ...state.splitAttrs.attributes.value,\n        'data-autofocus': props.autofocus === true || void 0\n      }, slots.control(controlSlotScope.value)));\n    }\n\n    hasLabel.value === true && node.push(h('div', {\n      class: labelClass.value\n    }, hSlot(slots.label, props.label)));\n    props.suffix !== void 0 && props.suffix !== null && node.push(h('div', {\n      class: 'q-field__suffix no-pointer-events row items-center'\n    }, props.suffix));\n    return node.concat(hSlot(slots.default));\n  }\n\n  function getBottom() {\n    let msg, key;\n\n    if (hasError.value === true) {\n      if (errorMessage.value !== null) {\n        msg = [h('div', {\n          role: 'alert'\n        }, errorMessage.value)];\n        key = `q--slot-error-${errorMessage.value}`;\n      } else {\n        msg = hSlot(slots.error);\n        key = 'q--slot-error';\n      }\n    } else if (props.hideHint !== true || state.focused.value === true) {\n      if (props.hint !== void 0) {\n        msg = [h('div', props.hint)];\n        key = `q--slot-hint-${props.hint}`;\n      } else {\n        msg = hSlot(slots.hint);\n        key = 'q--slot-hint';\n      }\n    }\n\n    const hasCounter = props.counter === true || slots.counter !== void 0;\n\n    if (props.hideBottomSpace === true && hasCounter === false && msg === void 0) {\n      return;\n    }\n\n    const main = h('div', {\n      key,\n      class: 'q-field__messages col'\n    }, msg);\n    return h('div', {\n      class: 'q-field__bottom row items-start q-field__bottom--' + (props.hideBottomSpace !== true ? 'animated' : 'stale')\n    }, [props.hideBottomSpace === true ? main : h(Transition, {\n      name: 'q-transition--field-message'\n    }, () => main), hasCounter === true ? h('div', {\n      class: 'q-field__counter'\n    }, slots.counter !== void 0 ? slots.counter() : state.computedCounter.value) : null]);\n  }\n\n  function getInnerAppendNode(key, content) {\n    return content === null ? null : h('div', {\n      key,\n      class: 'q-field__append q-field__marginal row no-wrap items-center q-anchor--skip'\n    }, content);\n  } // expose public methods\n\n\n  Object.assign(proxy, {\n    focus,\n    blur\n  });\n  let shouldActivate = false;\n  onDeactivated(() => {\n    shouldActivate = true;\n  });\n  onActivated(() => {\n    shouldActivate === true && props.autofocus === true && proxy.focus();\n  });\n  onMounted(() => {\n    if (isRuntimeSsrPreHydration.value === true && props.for === void 0) {\n      state.targetUid.value = getTargetUid();\n    }\n\n    props.autofocus === true && proxy.focus();\n  });\n  onBeforeUnmount(() => {\n    clearTimeout(focusoutTimer);\n  });\n  return function renderField() {\n    const labelAttrs = state.getControl === void 0 && slots.control === void 0 ? { ...state.splitAttrs.attributes.value,\n      'data-autofocus': props.autofocus,\n      ...attributes.value\n    } : attributes.value;\n    return h('label', {\n      ref: state.rootRef,\n      class: [classes.value, attrs.class],\n      style: attrs.style,\n      ...labelAttrs\n    }, [slots.before !== void 0 ? h('div', {\n      class: 'q-field__before q-field__marginal row no-wrap items-center',\n      onClick: prevent\n    }, slots.before()) : null, h('div', {\n      class: 'q-field__inner relative-position col self-stretch'\n    }, [h('div', {\n      ref: state.controlRef,\n      class: contentClass.value,\n      tabindex: -1,\n      ...state.controlEvents\n    }, getContent()), shouldRenderBottom.value === true ? getBottom() : null]), slots.after !== void 0 ? h('div', {\n      class: 'q-field__after q-field__marginal row no-wrap items-center',\n      onClick: prevent\n    }, slots.after()) : null]);\n  };\n}","map":{"version":3,"sources":["C:/Users/saina/OneDrive - City University of Hong Kong/Desktop/cityu/Cityu Year 4/FYP/code/frontend_sample2/node_modules/quasar/src/composables/private/use-field.js"],"names":["h","ref","computed","watch","Transition","nextTick","onActivated","onDeactivated","onBeforeUnmount","onMounted","getCurrentInstance","isRuntimeSsrPreHydration","QIcon","QSpinner","useDark","useDarkProps","useValidate","useValidateProps","useSplitAttrs","hSlot","uid","prevent","stopAndPrevent","addFocusFn","removeFocusFn","getTargetUid","val","fieldValueIsFilled","length","useFieldProps","label","String","stackLabel","Boolean","hint","hideHint","prefix","suffix","labelColor","color","bgColor","filled","outlined","borderless","standout","square","loading","labelSlot","bottomSlots","hideBottomSpace","rounded","dense","itemAligned","counter","clearable","clearIcon","disable","readonly","autofocus","for","maxlength","Number","useFieldEmits","useFieldState","props","attrs","proxy","vnode","isDark","$q","editable","innerLoading","focused","hasPopupOpen","splitAttrs","targetUid","rootRef","targetRef","controlRef","state","emit","slots","focusoutTimer","hasValue","modelValue","emitValue","value","controlEvents","onFocusin","onControlFocusin","onFocusout","onControlFocusout","Object","assign","clearValue","focus","computedCounter","len","Array","isArray","max","maxValues","isDirtyModel","hasRules","hasError","errorMessage","resetValidation","floatingLabel","shouldRenderBottom","error","styleType","classes","fieldClass","hasLabel","getControl","contentClass","labelClass","controlSlotScope","id","attributes","acc","focusHandler","el","document","activeElement","target","hasAttribute","querySelector","preventScroll","blur","contains","e","clearTimeout","then","setTimeout","hasFocus","platform","is","mobile","type","inputRef","getContent","node","prepend","push","class","key","onClick","getControlContainer","noErrorIcon","getInnerAppendNode","name","iconSet","field","tag","clear","tabindex","role","append","getInnerAppend","getControlChild","getShadowControl","hasShadow","rawControl","control","concat","default","getBottom","msg","hasCounter","main","content","shouldActivate","renderField","labelAttrs","style","before","after"],"mappings":"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","sourcesContent":["import { h, ref, computed, watch, Transition, nextTick, onActivated, onDeactivated, onBeforeUnmount, onMounted, getCurrentInstance } from 'vue'\n\nimport { isRuntimeSsrPreHydration } from '../../plugins/Platform.js'\n\nimport QIcon from '../../components/icon/QIcon.js'\nimport QSpinner from '../../components/spinner/QSpinner.js'\n\nimport useDark, { useDarkProps } from '../../composables/private/use-dark.js'\nimport useValidate, { useValidateProps } from './use-validate.js'\nimport useSplitAttrs from './use-split-attrs.js'\n\nimport { hSlot } from '../../utils/private/render.js'\nimport uid from '../../utils/uid.js'\nimport { prevent, stopAndPrevent } from '../../utils/event.js'\nimport { addFocusFn, removeFocusFn } from '../../utils/private/focus-manager.js'\n\nfunction getTargetUid (val) {\n  return val === void 0 ? `f_${ uid() }` : val\n}\n\nexport function fieldValueIsFilled (val) {\n  return val !== void 0\n    && val !== null\n    && ('' + val).length > 0\n}\n\nexport const useFieldProps = {\n  ...useDarkProps,\n  ...useValidateProps,\n\n  label: String,\n  stackLabel: Boolean,\n  hint: String,\n  hideHint: Boolean,\n  prefix: String,\n  suffix: String,\n\n  labelColor: String,\n  color: String,\n  bgColor: String,\n\n  filled: Boolean,\n  outlined: Boolean,\n  borderless: Boolean,\n  standout: [ Boolean, String ],\n\n  square: Boolean,\n\n  loading: Boolean,\n\n  labelSlot: Boolean,\n\n  bottomSlots: Boolean,\n  hideBottomSpace: Boolean,\n\n  rounded: Boolean,\n  dense: Boolean,\n  itemAligned: Boolean,\n\n  counter: Boolean,\n\n  clearable: Boolean,\n  clearIcon: String,\n\n  disable: Boolean,\n  readonly: Boolean,\n\n  autofocus: Boolean,\n\n  for: String,\n\n  maxlength: [ Number, String ]\n}\n\nexport const useFieldEmits = [ 'update:modelValue', 'clear', 'focus', 'blur', 'popup-show', 'popup-hide' ]\n\nexport function useFieldState () {\n  const { props, attrs, proxy, vnode } = getCurrentInstance()\n\n  const isDark = useDark(props, proxy.$q)\n\n  return {\n    isDark,\n\n    editable: computed(() =>\n      props.disable !== true && props.readonly !== true\n    ),\n\n    innerLoading: ref(false),\n    focused: ref(false),\n    hasPopupOpen: false,\n\n    splitAttrs: useSplitAttrs(attrs, vnode),\n    targetUid: ref(getTargetUid(props.for)),\n\n    rootRef: ref(null),\n    targetRef: ref(null),\n    controlRef: ref(null)\n\n    /**\n     * user supplied additionals:\n\n     * innerValue - computed\n     * floatingLabel - computed\n     * inputRef - computed\n\n     * fieldClass - computed\n     * hasShadow - computed\n\n     * controlEvents - Object with fn(e)\n\n     * getControl - fn\n     * getInnerAppend - fn\n     * getControlChild - fn\n     * getShadowControl - fn\n     * showPopup - fn\n     */\n  }\n}\n\nexport default function (state) {\n  const { props, emit, slots, attrs, proxy } = getCurrentInstance()\n  const { $q } = proxy\n\n  let focusoutTimer\n\n  if (state.hasValue === void 0) {\n    state.hasValue = computed(() => fieldValueIsFilled(props.modelValue))\n  }\n\n  if (state.emitValue === void 0) {\n    state.emitValue = value => {\n      emit('update:modelValue', value)\n    }\n  }\n\n  if (state.controlEvents === void 0) {\n    state.controlEvents = {\n      onFocusin: onControlFocusin,\n      onFocusout: onControlFocusout\n    }\n  }\n\n  Object.assign(state, {\n    clearValue,\n    onControlFocusin,\n    onControlFocusout,\n    focus\n  })\n\n  if (state.computedCounter === void 0) {\n    state.computedCounter = computed(() => {\n      if (props.counter !== false) {\n        const len = typeof props.modelValue === 'string' || typeof props.modelValue === 'number'\n          ? ('' + props.modelValue).length\n          : (Array.isArray(props.modelValue) === true ? props.modelValue.length : 0)\n\n        const max = props.maxlength !== void 0\n          ? props.maxlength\n          : props.maxValues\n\n        return len + (max !== void 0 ? ' / ' + max : '')\n      }\n    })\n  }\n\n  const {\n    isDirtyModel,\n    hasRules,\n    hasError,\n    errorMessage,\n    resetValidation\n  } = useValidate(state.focused, state.innerLoading)\n\n  const floatingLabel = state.floatingLabel !== void 0\n    ? computed(() => props.stackLabel === true || state.focused.value === true || state.floatingLabel.value === true)\n    : computed(() => props.stackLabel === true || state.focused.value === true || state.hasValue.value === true)\n\n  const shouldRenderBottom = computed(() =>\n    props.bottomSlots === true\n    || props.hint !== void 0\n    || hasRules.value === true\n    || props.counter === true\n    || props.error !== null\n  )\n\n  const styleType = computed(() => {\n    if (props.filled === true) { return 'filled' }\n    if (props.outlined === true) { return 'outlined' }\n    if (props.borderless === true) { return 'borderless' }\n    if (props.standout) { return 'standout' }\n    return 'standard'\n  })\n\n  const classes = computed(() =>\n    `q-field row no-wrap items-start q-field--${ styleType.value }`\n    + (state.fieldClass !== void 0 ? ` ${ state.fieldClass.value }` : '')\n    + (props.rounded === true ? ' q-field--rounded' : '')\n    + (props.square === true ? ' q-field--square' : '')\n    + (floatingLabel.value === true ? ' q-field--float' : '')\n    + (hasLabel.value === true ? ' q-field--labeled' : '')\n    + (props.dense === true ? ' q-field--dense' : '')\n    + (props.itemAligned === true ? ' q-field--item-aligned q-item-type' : '')\n    + (state.isDark.value === true ? ' q-field--dark' : '')\n    + (state.getControl === void 0 ? ' q-field--auto-height' : '')\n    + (state.focused.value === true ? ' q-field--focused' : '')\n    + (hasError.value === true ? ' q-field--error' : '')\n    + (hasError.value === true || state.focused.value === true ? ' q-field--highlighted' : '')\n    + (props.hideBottomSpace !== true && shouldRenderBottom.value === true ? ' q-field--with-bottom' : '')\n    + (props.disable === true ? ' q-field--disabled' : (props.readonly === true ? ' q-field--readonly' : ''))\n  )\n\n  const contentClass = computed(() =>\n    'q-field__control relative-position row no-wrap'\n    + (props.bgColor !== void 0 ? ` bg-${ props.bgColor }` : '')\n    + (\n      hasError.value === true\n        ? ' text-negative'\n        : (\n            typeof props.standout === 'string' && props.standout.length > 0 && state.focused.value === true\n              ? ` ${ props.standout }`\n              : (props.color !== void 0 ? ` text-${ props.color }` : '')\n          )\n    )\n  )\n\n  const hasLabel = computed(() =>\n    props.labelSlot === true || props.label !== void 0\n  )\n\n  const labelClass = computed(() =>\n    'q-field__label no-pointer-events absolute ellipsis'\n    + (props.labelColor !== void 0 && hasError.value !== true ? ` text-${ props.labelColor }` : '')\n  )\n\n  const controlSlotScope = computed(() => ({\n    id: state.targetUid.value,\n    editable: state.editable.value,\n    focused: state.focused.value,\n    floatingLabel: floatingLabel.value,\n    modelValue: props.modelValue,\n    emitValue: state.emitValue\n  }))\n\n  const attributes = computed(() => {\n    const acc = {\n      for: state.targetUid.value\n    }\n\n    if (props.disable === true) {\n      acc[ 'aria-disabled' ] = 'true'\n    }\n    else if (props.readonly === true) {\n      acc[ 'aria-readonly' ] = 'true'\n    }\n\n    return acc\n  })\n\n  watch(() => props.for, val => {\n    // don't transform targetUid into a computed\n    // prop as it will break SSR\n    state.targetUid.value = getTargetUid(val)\n  })\n\n  function focusHandler () {\n    const el = document.activeElement\n    let target = state.targetRef !== void 0 && state.targetRef.value\n\n    if (target && (el === null || el.id !== state.targetUid.value)) {\n      target.hasAttribute('tabindex') === true || (target = target.querySelector('[tabindex]'))\n      if (target && target !== el) {\n        target.focus({ preventScroll: true })\n      }\n    }\n  }\n\n  function focus () {\n    addFocusFn(focusHandler)\n  }\n\n  function blur () {\n    removeFocusFn(focusHandler)\n    const el = document.activeElement\n    if (el !== null && state.rootRef.value.contains(el)) {\n      el.blur()\n    }\n  }\n\n  function onControlFocusin (e) {\n    clearTimeout(focusoutTimer)\n    if (state.editable.value === true && state.focused.value === false) {\n      state.focused.value = true\n      emit('focus', e)\n    }\n  }\n\n  function onControlFocusout (e, then) {\n    clearTimeout(focusoutTimer)\n    focusoutTimer = setTimeout(() => {\n      if (\n        document.hasFocus() === true && (\n          state.hasPopupOpen === true\n          || state.controlRef === void 0\n          || state.controlRef.value === null\n          || state.controlRef.value.contains(document.activeElement) !== false\n        )\n      ) {\n        return\n      }\n\n      if (state.focused.value === true) {\n        state.focused.value = false\n        emit('blur', e)\n      }\n\n      then !== void 0 && then()\n    })\n  }\n\n  function clearValue (e) {\n    // prevent activating the field but keep focus on desktop\n    stopAndPrevent(e)\n\n    if ($q.platform.is.mobile !== true) {\n      const el = (state.targetRef !== void 0 && state.targetRef.value) || state.rootRef.value\n      el.focus()\n    }\n    else if (state.rootRef.value.contains(document.activeElement) === true) {\n      document.activeElement.blur()\n    }\n\n    if (props.type === 'file') { // TODO vue3\n      // do not let focus be triggered\n      // as it will make the native file dialog\n      // appear for another selection\n      state.inputRef.value.value = null\n    }\n\n    emit('update:modelValue', null)\n    emit('clear', props.modelValue)\n\n    nextTick(() => {\n      resetValidation()\n\n      if ($q.platform.is.mobile !== true) {\n        isDirtyModel.value = false\n      }\n    })\n  }\n\n  function getContent () {\n    const node = []\n\n    slots.prepend !== void 0 && node.push(\n      h('div', {\n        class: 'q-field__prepend q-field__marginal row no-wrap items-center',\n        key: 'prepend',\n        onClick: prevent\n      }, slots.prepend())\n    )\n\n    node.push(\n      h('div', {\n        class: 'q-field__control-container col relative-position row no-wrap q-anchor--skip'\n      }, getControlContainer())\n    )\n\n    hasError.value === true && props.noErrorIcon === false && node.push(\n      getInnerAppendNode('error', [\n        h(QIcon, { name: $q.iconSet.field.error, color: 'negative' })\n      ])\n    )\n\n    if (props.loading === true || state.innerLoading.value === true) {\n      node.push(\n        getInnerAppendNode(\n          'inner-loading-append',\n          slots.loading !== void 0\n            ? slots.loading()\n            : [ h(QSpinner, { color: props.color }) ]\n        )\n      )\n    }\n    else if (props.clearable === true && state.hasValue.value === true && state.editable.value === true) {\n      node.push(\n        getInnerAppendNode('inner-clearable-append', [\n          h(QIcon, {\n            class: 'q-field__focusable-action',\n            tag: 'button',\n            name: props.clearIcon || $q.iconSet.field.clear,\n            tabindex: 0,\n            type: 'button',\n            'aria-hidden': null,\n            role: null,\n            onClick: clearValue\n          })\n        ])\n      )\n    }\n\n    slots.append !== void 0 && node.push(\n      h('div', {\n        class: 'q-field__append q-field__marginal row no-wrap items-center',\n        key: 'append',\n        onClick: prevent\n      }, slots.append())\n    )\n\n    state.getInnerAppend !== void 0 && node.push(\n      getInnerAppendNode('inner-append', state.getInnerAppend())\n    )\n\n    state.getControlChild !== void 0 && node.push(\n      state.getControlChild()\n    )\n\n    return node\n  }\n\n  function getControlContainer () {\n    const node = []\n\n    props.prefix !== void 0 && props.prefix !== null && node.push(\n      h('div', {\n        class: 'q-field__prefix no-pointer-events row items-center'\n      }, props.prefix)\n    )\n\n    if (state.getShadowControl !== void 0 && state.hasShadow.value === true) {\n      node.push(\n        state.getShadowControl()\n      )\n    }\n\n    if (state.getControl !== void 0) {\n      node.push(state.getControl())\n    }\n    // internal usage only:\n    else if (slots.rawControl !== void 0) {\n      node.push(slots.rawControl())\n    }\n    else if (slots.control !== void 0) {\n      node.push(\n        h('div', {\n          ref: state.targetRef,\n          class: 'q-field__native row',\n          ...state.splitAttrs.attributes.value,\n          'data-autofocus': props.autofocus === true || void 0\n        }, slots.control(controlSlotScope.value))\n      )\n    }\n\n    hasLabel.value === true && node.push(\n      h('div', {\n        class: labelClass.value\n      }, hSlot(slots.label, props.label))\n    )\n\n    props.suffix !== void 0 && props.suffix !== null && node.push(\n      h('div', {\n        class: 'q-field__suffix no-pointer-events row items-center'\n      }, props.suffix)\n    )\n\n    return node.concat(hSlot(slots.default))\n  }\n\n  function getBottom () {\n    let msg, key\n\n    if (hasError.value === true) {\n      if (errorMessage.value !== null) {\n        msg = [ h('div', { role: 'alert' }, errorMessage.value) ]\n        key = `q--slot-error-${ errorMessage.value }`\n      }\n      else {\n        msg = hSlot(slots.error)\n        key = 'q--slot-error'\n      }\n    }\n    else if (props.hideHint !== true || state.focused.value === true) {\n      if (props.hint !== void 0) {\n        msg = [ h('div', props.hint) ]\n        key = `q--slot-hint-${ props.hint }`\n      }\n      else {\n        msg = hSlot(slots.hint)\n        key = 'q--slot-hint'\n      }\n    }\n\n    const hasCounter = props.counter === true || slots.counter !== void 0\n\n    if (props.hideBottomSpace === true && hasCounter === false && msg === void 0) {\n      return\n    }\n\n    const main = h('div', {\n      key,\n      class: 'q-field__messages col'\n    }, msg)\n\n    return h('div', {\n      class: 'q-field__bottom row items-start q-field__bottom--'\n        + (props.hideBottomSpace !== true ? 'animated' : 'stale')\n    }, [\n      props.hideBottomSpace === true\n        ? main\n        : h(Transition, { name: 'q-transition--field-message' }, () => main),\n\n      hasCounter === true\n        ? h('div', {\n          class: 'q-field__counter'\n        }, slots.counter !== void 0 ? slots.counter() : state.computedCounter.value)\n        : null\n    ])\n  }\n\n  function getInnerAppendNode (key, content) {\n    return content === null\n      ? null\n      : h('div', {\n        key,\n        class: 'q-field__append q-field__marginal row no-wrap items-center q-anchor--skip'\n      }, content)\n  }\n\n  // expose public methods\n  Object.assign(proxy, { focus, blur })\n\n  let shouldActivate = false\n\n  onDeactivated(() => {\n    shouldActivate = true\n  })\n\n  onActivated(() => {\n    shouldActivate === true && props.autofocus === true && proxy.focus()\n  })\n\n  onMounted(() => {\n    if (isRuntimeSsrPreHydration.value === true && props.for === void 0) {\n      state.targetUid.value = getTargetUid()\n    }\n\n    props.autofocus === true && proxy.focus()\n  })\n\n  onBeforeUnmount(() => {\n    clearTimeout(focusoutTimer)\n  })\n\n  return function renderField () {\n    const labelAttrs = state.getControl === void 0 && slots.control === void 0\n      ? {\n          ...state.splitAttrs.attributes.value,\n          'data-autofocus': props.autofocus,\n          ...attributes.value\n        }\n      : attributes.value\n\n    return h('label', {\n      ref: state.rootRef,\n      class: [\n        classes.value,\n        attrs.class\n      ],\n      style: attrs.style,\n      ...labelAttrs\n    }, [\n      slots.before !== void 0\n        ? h('div', {\n          class: 'q-field__before q-field__marginal row no-wrap items-center',\n          onClick: prevent\n        }, slots.before())\n        : null,\n\n      h('div', {\n        class: 'q-field__inner relative-position col self-stretch'\n      }, [\n        h('div', {\n          ref: state.controlRef,\n          class: contentClass.value,\n          tabindex: -1,\n          ...state.controlEvents\n        }, getContent()),\n\n        shouldRenderBottom.value === true\n          ? getBottom()\n          : null\n      ]),\n\n      slots.after !== void 0\n        ? h('div', {\n          class: 'q-field__after q-field__marginal row no-wrap items-center',\n          onClick: prevent\n        }, slots.after())\n        : null\n    ])\n  }\n}\n"]},"metadata":{},"sourceType":"module"}