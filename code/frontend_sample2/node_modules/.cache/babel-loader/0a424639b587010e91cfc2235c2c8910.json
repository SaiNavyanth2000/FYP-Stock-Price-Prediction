{"ast":null,"code":"import { client } from '../../plugins/Platform.js';\nimport { isKeyCode } from './key-composition.js';\nconst handlers = [];\nlet escDown;\n\nfunction onKeydown(evt) {\n  escDown = evt.keyCode === 27;\n}\n\nfunction onBlur() {\n  if (escDown === true) {\n    escDown = false;\n  }\n}\n\nfunction onKeyup(evt) {\n  if (escDown === true) {\n    escDown = false;\n\n    if (isKeyCode(evt, 27) === true) {\n      handlers[handlers.length - 1](evt);\n    }\n  }\n}\n\nfunction update(action) {\n  window[action]('keydown', onKeydown);\n  window[action]('blur', onBlur);\n  window[action]('keyup', onKeyup);\n  escDown = false;\n}\n\nexport function addEscapeKey(fn) {\n  if (client.is.desktop === true) {\n    handlers.push(fn);\n\n    if (handlers.length === 1) {\n      update('addEventListener');\n    }\n  }\n}\nexport function removeEscapeKey(fn) {\n  const index = handlers.indexOf(fn);\n\n  if (index > -1) {\n    handlers.splice(index, 1);\n\n    if (handlers.length === 0) {\n      update('removeEventListener');\n    }\n  }\n}","map":{"version":3,"sources":["C:/Users/saina/OneDrive - City University of Hong Kong/Desktop/cityu/Cityu Year 4/FYP/code/frontend_sample2/node_modules/quasar/src/utils/private/escape-key.js"],"names":["client","isKeyCode","handlers","escDown","onKeydown","evt","keyCode","onBlur","onKeyup","length","update","action","window","addEscapeKey","fn","is","desktop","push","removeEscapeKey","index","indexOf","splice"],"mappings":"AAAA,SAASA,MAAT,QAAuB,2BAAvB;AACA,SAASC,SAAT,QAA0B,sBAA1B;AAEA,MAAMC,QAAQ,GAAG,EAAjB;AACA,IAAIC,OAAJ;;AAEA,SAASC,SAAT,CAAoBC,GAApB,EAAyB;AACvBF,EAAAA,OAAO,GAAGE,GAAG,CAACC,OAAJ,KAAgB,EAA1B;AACD;;AAED,SAASC,MAAT,GAAmB;AACjB,MAAIJ,OAAO,KAAK,IAAhB,EAAsB;AACpBA,IAAAA,OAAO,GAAG,KAAV;AACD;AACF;;AAED,SAASK,OAAT,CAAkBH,GAAlB,EAAuB;AACrB,MAAIF,OAAO,KAAK,IAAhB,EAAsB;AACpBA,IAAAA,OAAO,GAAG,KAAV;;AAEA,QAAIF,SAAS,CAACI,GAAD,EAAM,EAAN,CAAT,KAAuB,IAA3B,EAAiC;AAC/BH,MAAAA,QAAQ,CAAEA,QAAQ,CAACO,MAAT,GAAkB,CAApB,CAAR,CAAgCJ,GAAhC;AACD;AACF;AACF;;AAED,SAASK,MAAT,CAAiBC,MAAjB,EAAyB;AACvBC,EAAAA,MAAM,CAAED,MAAF,CAAN,CAAiB,SAAjB,EAA4BP,SAA5B;AACAQ,EAAAA,MAAM,CAAED,MAAF,CAAN,CAAiB,MAAjB,EAAyBJ,MAAzB;AACAK,EAAAA,MAAM,CAAED,MAAF,CAAN,CAAiB,OAAjB,EAA0BH,OAA1B;AACAL,EAAAA,OAAO,GAAG,KAAV;AACD;;AAED,OAAO,SAASU,YAAT,CAAuBC,EAAvB,EAA2B;AAChC,MAAId,MAAM,CAACe,EAAP,CAAUC,OAAV,KAAsB,IAA1B,EAAgC;AAC9Bd,IAAAA,QAAQ,CAACe,IAAT,CAAcH,EAAd;;AAEA,QAAIZ,QAAQ,CAACO,MAAT,KAAoB,CAAxB,EAA2B;AACzBC,MAAAA,MAAM,CAAC,kBAAD,CAAN;AACD;AACF;AACF;AAED,OAAO,SAASQ,eAAT,CAA0BJ,EAA1B,EAA8B;AACnC,QAAMK,KAAK,GAAGjB,QAAQ,CAACkB,OAAT,CAAiBN,EAAjB,CAAd;;AACA,MAAIK,KAAK,GAAG,CAAC,CAAb,EAAgB;AACdjB,IAAAA,QAAQ,CAACmB,MAAT,CAAgBF,KAAhB,EAAuB,CAAvB;;AAEA,QAAIjB,QAAQ,CAACO,MAAT,KAAoB,CAAxB,EAA2B;AACzBC,MAAAA,MAAM,CAAC,qBAAD,CAAN;AACD;AACF;AACF","sourcesContent":["import { client } from '../../plugins/Platform.js'\nimport { isKeyCode } from './key-composition.js'\n\nconst handlers = []\nlet escDown\n\nfunction onKeydown (evt) {\n  escDown = evt.keyCode === 27\n}\n\nfunction onBlur () {\n  if (escDown === true) {\n    escDown = false\n  }\n}\n\nfunction onKeyup (evt) {\n  if (escDown === true) {\n    escDown = false\n\n    if (isKeyCode(evt, 27) === true) {\n      handlers[ handlers.length - 1 ](evt)\n    }\n  }\n}\n\nfunction update (action) {\n  window[ action ]('keydown', onKeydown)\n  window[ action ]('blur', onBlur)\n  window[ action ]('keyup', onKeyup)\n  escDown = false\n}\n\nexport function addEscapeKey (fn) {\n  if (client.is.desktop === true) {\n    handlers.push(fn)\n\n    if (handlers.length === 1) {\n      update('addEventListener')\n    }\n  }\n}\n\nexport function removeEscapeKey (fn) {\n  const index = handlers.indexOf(fn)\n  if (index > -1) {\n    handlers.splice(index, 1)\n\n    if (handlers.length === 0) {\n      update('removeEventListener')\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}