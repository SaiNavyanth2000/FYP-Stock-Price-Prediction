{"ast":null,"code":"import { listenOpts } from '../event.js';\nimport { portalList } from '../private/portal.js';\nlet timer;\nconst {\n  notPassiveCapture\n} = listenOpts,\n      registeredList = [];\n\nfunction globalHandler(evt) {\n  clearTimeout(timer);\n  const target = evt.target;\n\n  if (target === void 0 || target.nodeType === 8 || target.classList.contains('no-pointer-events') === true) {\n    return;\n  } // check last portal vm if it's\n  // a QDialog and not in seamless mode\n\n\n  let portalIndex = portalList.length - 1;\n\n  while (portalIndex >= 0) {\n    const proxy = portalList[portalIndex].$;\n\n    if (proxy.type.name !== 'QDialog') {\n      break;\n    }\n\n    if (proxy.props.seamless !== true) {\n      return;\n    }\n\n    portalIndex--;\n  }\n\n  for (let i = registeredList.length - 1; i >= 0; i--) {\n    const state = registeredList[i];\n\n    if ((state.anchorEl.value === null || state.anchorEl.value.contains(target) === false) && (target === document.body || state.innerRef.value !== null && state.innerRef.value.contains(target) === false)) {\n      // mark the event as being processed by clickOutside\n      // used to prevent refocus after menu close\n      evt.qClickOutside = true;\n      state.onClickOutside(evt);\n    } else {\n      return;\n    }\n  }\n}\n\nexport function addClickOutside(clickOutsideProps) {\n  registeredList.push(clickOutsideProps);\n\n  if (registeredList.length === 1) {\n    document.addEventListener('mousedown', globalHandler, notPassiveCapture);\n    document.addEventListener('touchstart', globalHandler, notPassiveCapture);\n  }\n}\nexport function removeClickOutside(clickOutsideProps) {\n  const index = registeredList.findIndex(h => h === clickOutsideProps);\n\n  if (index > -1) {\n    registeredList.splice(index, 1);\n\n    if (registeredList.length === 0) {\n      clearTimeout(timer);\n      document.removeEventListener('mousedown', globalHandler, notPassiveCapture);\n      document.removeEventListener('touchstart', globalHandler, notPassiveCapture);\n    }\n  }\n}","map":{"version":3,"sources":["C:/Users/saina/OneDrive - City University of Hong Kong/Desktop/cityu/Cityu Year 4/FYP/code/frontend_sample2/node_modules/quasar/src/utils/private/click-outside.js"],"names":["listenOpts","portalList","timer","notPassiveCapture","registeredList","globalHandler","evt","clearTimeout","target","nodeType","classList","contains","portalIndex","length","proxy","$","type","name","props","seamless","i","state","anchorEl","value","document","body","innerRef","qClickOutside","onClickOutside","addClickOutside","clickOutsideProps","push","addEventListener","removeClickOutside","index","findIndex","h","splice","removeEventListener"],"mappings":"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","sourcesContent":["import { listenOpts } from '../event.js'\nimport { portalList } from '../private/portal.js'\n\nlet timer\n\nconst\n  { notPassiveCapture } = listenOpts,\n  registeredList = []\n\nfunction globalHandler (evt) {\n  clearTimeout(timer)\n\n  const target = evt.target\n\n  if (\n    target === void 0\n    || target.nodeType === 8\n    || target.classList.contains('no-pointer-events') === true\n  ) {\n    return\n  }\n\n  // check last portal vm if it's\n  // a QDialog and not in seamless mode\n  let portalIndex = portalList.length - 1\n\n  while (portalIndex >= 0) {\n    const proxy = portalList[ portalIndex ].$\n\n    if (proxy.type.name !== 'QDialog') {\n      break\n    }\n\n    if (proxy.props.seamless !== true) {\n      return\n    }\n\n    portalIndex--\n  }\n\n  for (let i = registeredList.length - 1; i >= 0; i--) {\n    const state = registeredList[ i ]\n\n    if (\n      (\n        state.anchorEl.value === null\n        || state.anchorEl.value.contains(target) === false\n      )\n      && (\n        target === document.body\n        || (\n          state.innerRef.value !== null\n          && state.innerRef.value.contains(target) === false\n        )\n      )\n    ) {\n      // mark the event as being processed by clickOutside\n      // used to prevent refocus after menu close\n      evt.qClickOutside = true\n      state.onClickOutside(evt)\n    }\n    else {\n      return\n    }\n  }\n}\n\nexport function addClickOutside (clickOutsideProps) {\n  registeredList.push(clickOutsideProps)\n\n  if (registeredList.length === 1) {\n    document.addEventListener('mousedown', globalHandler, notPassiveCapture)\n    document.addEventListener('touchstart', globalHandler, notPassiveCapture)\n  }\n}\n\nexport function removeClickOutside (clickOutsideProps) {\n  const index = registeredList.findIndex(h => h === clickOutsideProps)\n\n  if (index > -1) {\n    registeredList.splice(index, 1)\n\n    if (registeredList.length === 0) {\n      clearTimeout(timer)\n      document.removeEventListener('mousedown', globalHandler, notPassiveCapture)\n      document.removeEventListener('touchstart', globalHandler, notPassiveCapture)\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module"}